{% load static %}
<html>
    <head>
        <title>CardGame28</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <style> 
            body {
                margin: 0;
            }
            #game_room {
                position: relative;
                left: 0%;
                top:  0%;
                width: 100%;
                height: 100%;
                z-index: 0;
            }
            #game_table {
                border: 2px solid #8b2;
                border-radius: 30px;
                position: relative;
                left: 10%;
                top:  10%;
                width: 80%;
                height: 80%;
                z-index: 0;
            }
            #game_controls {
                background-color: darkgray; 
                position: relative;
                left: 0%;
                top: 55%;
                width: 100%;
                height: 30%;
                z-index: 1;
            }
            .player {
                //background-color: darkgray; 
                position: absolute;
                width: 15%;
                height: 10%;
                z-index: 2;
            }
            .player_photo {
                border-radius: 50%;
                position: relative;
                width: 100%;
                height: 100%
            }
            .player_text {
                position: absolute;
                left: 0%;
                top: 80%;
                width: 100%;
                text-align: center;
            }
            #player_1 {
                left: 43%;
                top: 2%;
            }
            #player_2 {
                left: 85%;
                top: 15%;
            }
            #player_3 {
                left: 85%;
                top: 40%;
            }
            #player_5 {
                left: 0%;
                top: 40%;
            }
            #player_6 {
                left: 0%;
                top: 15%;
            }
            #player_2_four {
                left: 85%;
                top: 30%;
            }
            #player_6_four {
                left: 0%;
                top: 30%;
            }
            .player_card_holder {
                //background-color: red;
                position: absolute;
                width: 10%;
                height: 10%;
            }
            .playing_card_heads {
                width: 100%;
                height: 100%;
            }
            .playing_card_sides {
                width: 100%;
                height: 100%;
                transform: rotate(90deg);
            }
            .playing_card_top_right {
                width: 100%;
                height: 100%;
                transform: rotate(60deg);
            }
            .playing_card_bottom_right {
                width: 100%;
                height: 100%;
                transform: rotate(120deg);
            }
            .playing_card_bottom_left {
                width: 100%;
                height: 100%;
                transform: rotate(240deg);
            }
            .playing_card_top_left {
                width: 100%;
                height: 100%;
                transform: rotate(300deg);
            }
            #player_1_card {
                position: absolute;
                left: 45%;
                top: 5%;
            }
            #player_2_card {
                position: absolute;
                left: 65%;
                top: 15%;
            }
            #player_3_card {
                position: absolute;
                left: 65%;
                top: 30%;
            }
            #player_4_card {
                position: absolute;
                left: 45%;
                top: 40%;
            }
            #player_5_card {
                position: absolute;
                left: 25%;
                top: 30%;
            }
            #player_6_card {
                position: absolute;
                left: 25%;
                top: 15%;
            }
            #trump_card {
                position: absolute;
                left: 7%;
                top: 87%;
            }
            #my_cards {
                background-color: blue;
                position: absolute;
                left: 35%;
                top: 83%;
                width: 50%;
                height: 10%;
                z-index: 1;
            }
            .my_card_holder {
                background-color: yellow;
                position: relative;
                width: 20%;
                height: 80%;
                top: 20%;
            }
            #my_drag_card {
                position: absolute;
                left:5%;
                z-index: 10;
                border: 2px solid red;
                visibility: hidden;
                position: relative;
                width: 20%;
                height: 80%;
                top: 0%;
            }
            .my_card_1 {
                position: absolute;
                left: 5%;
                z-index: 1;
            }
            .my_card_2 {
                position: absolute;
                left: 15%;
                z-index: 2;
            }
            .my_card_3 {
                position: absolute;
                left: 25%;
                z-index: 3;
            }
            .my_card_4 {
                position: absolute;
                left: 35%;
                z-index: 4;
            }
            .my_card_5 {
                position: absolute;
                left: 45%;
                z-index: 5;
            }
            .my_card_6 {
                position: absolute;
                left: 55%;
                z-index: 6;
            }
            .my_card_7 {
                position: absolute;
                left: 65%;
                z-index: 7;
            }
            .my_card_8 {
                position: absolute;
                left: 75%;
                z-index: 8;
            }
            .card_template {
                visibility: hidden;
                position: absolute;
                left: 5%;
                z-index: 1;
            }
            </style>
            <script type="text/javascript">
                selectedCard = null;
                
                function intializePage() {
                    addNewCards("");
                    /*var my_cards = document.getElementById("my_cards"); 
                    my_cards.addEventListener("touchstart", dragMyCard, false);
                    my_cards.addEventListener("touchend", dropMyCard, false);
                    */
                }
                dragStart = 0;
                
                function selectMyCard(card) {
                    card.style.top = "0%";
                    dragCard = document.getElementById("my_drag_card");
                    dragCardShow = "hidden";
                    
                    if (selectedCard != null)
                        selectedCard.style.top = "20%";
                    if (selectedCard == card)
                        selectedCard = null;
                    else {
                        selectedCard = card;
                        dragCardShow = "visible";
                        document.getElementById("game_controls").innerHTML = "Left: " + selectedCard.style.left;
                        dragCard.style.left = selectedCard.style.left;
                    }
                    dragCard.style.visibility = dragCardShow;
                }
                
                function dragMyCard(event) {
                    event.dataTransfer.setData("Text", event.target.id);
                    document.getElementById("game_controls").innerHTML = "Started to drag the p element";
                }
                
                function dropMyCard(event) {
                    allowDrop(event);
                    document.getElementById("game_controls").innerHTML = "dropped on me: " + event.target.parentElement.id;
                    
                    
                    newPos = event.target.parentElement.style.left;
                    newIndex = event.target.parentElement.style.zIndex;
                    
                    event.target.parentElement.style.left = selectedCard.style.left;
                    event.target.parentElement.style.zIndex = selectedCard.style.zIndex;
                    selectedCard.style.left = newPos;
                    selectedCard.style.zIndex = newIndex;
                    
                    dragCard = document.getElementById("my_drag_card");
                    dragCard.style.left = newPos;
                }
                
                function allowDrop(event) {
                    event.preventDefault();
                }
                
                function addNewCards(cards) {
                    myCards = document.getElementById("my_cards");
                    cardCount = myCards.children.length - 1;
                    //newCardHtml = '<div id="my_card_1" class="my_card_holder my_card_1" onclick="selectMyCard(this)" ondblclick="" ondrop="dropMyCard(event, this)" ondragover="allowDrop(event)"></div>';
                
                    //newCard = document.createElement(newCardHtml);
                    newCard = document.getElementById("card_CA").cloneNode(true);
                    newCard.style.left = "5%";
                    newCard.style.zIndex = "1";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "15%";
                    newCard.style.zIndex = "2";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "25%";
                    newCard.style.zIndex = "3";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "35%";
                    newCard.style.zIndex = "4";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "45%";
                    newCard.style.zIndex = "5";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "55%";
                    newCard.style.zIndex = "6";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "65%";
                    newCard.style.zIndex = "7";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                    
                    newCard = document.getElementById("card_BK").cloneNode(true);
                    newCard.style.left = "75%";
                    newCard.style.zIndex = "8";
                    newCard.style.visibility = "visible";
                    myCards.appendChild(newCard);
                }
            </script>
    </head>
    <body onload="intializePage()">
        <div id="game_room">
            <div id="player_1" class="player">
                <img id="player_img" class="player_photo" src="{% static "media/anonymous.jpg" %}" alt="Player 1">
                <div id="player_name" class="player_text">Player 1</div>
            </div>
            <div id="player_2" class="player">
                <img id="player_img" class="player_photo" src="{% static "media/anonymous.jpg" %}" alt="Player 2">
                <div id="player_name" class="player_text">Player 2</div>
            </div>
            <div id="player_3" class="player">
                <img id="player_img" class="player_photo" src="{% static "media/anonymous.jpg" %}" alt="Player 3">
                <div id="player_name" class="player_text">Player 3</div>
            </div>
            <div id="player_5" class="player">
                <img id="player_img" class="player_photo" src="{% static "media/anonymous.jpg" %}" alt="Player 5">
                <div id="player_name" class="player_text">Player 5</div>
            </div>
            <div id="player_6" class="player">
                <img id="player_img" class="player_photo" src="{% static "media/anonymous.jpg" %}" alt="Player 6">
                <div id="player_name" class="player_text">Player 6</div>
            </div>
            <div id="game_table">
                <div id="player_1_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_heads" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="player_2_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_top_right" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="player_3_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_bottom_right" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="player_4_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_heads" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="player_5_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_bottom_left" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="player_6_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_top_left" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="trump_card" class="player_card_holder">
                    <img id="card_img" class="playing_card_heads" src="{% static "media/playing_card_back.jpg" %}">
                </div>
                <div id="game_controls">
                    
                </div>                
            </div>

            <div id="my_cards">
                <div id="my_drag_card" draggable="true" onclick="selectMyCard(selectedCard)" ondblclick="" ondragstart="dragMyCard(event)">
                </div>
            </div>
            <div id="card_BK" class="my_card_holder card_template" onclick="selectMyCard(this)" ondrop="dropMyCard(event)" ondragover="allowDrop(event)">
                <img id="card_img" class="playing_card_heads" src="{% static "media/playing_card_back.jpg" %}">
            </div>
            <div id="card_CA" class="my_card_holder card_template" onclick="selectMyCard(this)" ondrop="dropMyCard(event)" ondragover="allowDrop(event)">
                <img id="card_img" class="playing_card_heads" src="{% static "media/CA.png" %}">
            </div>
        </div>
    </body>
</html>
